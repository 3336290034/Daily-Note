# 准备星宸科技嵌入式AE二面

## 怎么设计嵌入式系统，怎么用最低的成本满足功能？（在你的项目中，你是怎么设计这套方案的，处于什么考虑的？）

- 我觉得嵌入式系统设计的核心是`需求驱动 + 分层落地 + 成本平衡`，我会从项目背景考虑，拆解项目需求边界，确定项目方案；
- 有了系统方案之后，再从`硬件选型 + 软硬件架构 + 协议适配 + 调试优化`这四个方面逐步推进；
- 在逐步实现的过程中，也要考虑“功能复用 + 设备兼容性 + 后期开发维护成本”等等这些问题，这也是很重要的；
- 就拿我的项目举例：我的项目背景就是要解决工业场景中“多设备难管理，通信不稳定”的问题，我就设计了“PC集中管控/中控处理核心/传感器执行”这样的技术方案
- 之后就是上面说的逐步推进嘛，第一个就是`硬件选型`，因为我的中控是整个系统处理的核心，所以我就选了H5作为中控，它的性能也满足，成本来讲也相对低❓[一颗大概20块左右]
- 传感器的选型也是这样，因为我项目里面它们只需支持Modbus通信和数据采集，需要的IO口也少，所以就用了成本很低的F030❓你知道价格吗❓[一颗大概3、4块左右]
- 然后就是`软硬件架构`了，硬件架构的话和我们前面说的PC xxx方案差不多，多的话就是会涉及到中间的一些小芯片选型比如串口转485这些；❓所以用的啥芯片
- 说回软件架构，因为我们收集多个传感器的数据，而且可能我们就在某一时刻急需某一个数据，这在工业场景确实是存在的，所以我觉得采用单纯的逻辑是不行的，既不能满足实时性，后期的开发维护也困难
- 所以我就使用FreeRTOS，用任务、队列、互斥量信号量这些去实现我们需要的这样一些功能，最后效果也是符合预期的
- 接下就是`协议适配`，这个就需要围绕`软件架构和需求`来了，因为要高速率所以usb嘛，要通信稳定就选了485，其实usb也是差分，稳定性也不错，最后一个就是前面提到的兼容性了就用了Modbus，老牌协议了，，，
- 当然这个也要考虑我们要做的一些功能❓❓❓
- 最后的`调试优化`，就是对整个项目进行一些测试把可以说是（可以说说你在实习期做的产品测试），就比如我认为的让两个IO短接，看有什么反应，认为的关掉中控或者传感器，看能不能马上恢复数据读写这些功能
- 之后就针对性的去调试优化，就比如我刚刚讲的那两个，就是我真的去做的，第一个那个xxxx就我们加了xxxx解决了这个问题，后面xxx就通过修改xxxx解决了
- 上面的就是我的一些想法了，我的回答应该就这些了，面试官您看看如何

## 你提到通过让两个IO短接来测试系统反应，能详细说明这个测试的具体目的和预期结果吗？测试过程中发现了什么问题？又是如何解决的？

## 我想知道你选用硬件的时候，处理考虑你提到的哪些？有没有考虑到低功耗？稳定性这些？

## 整个项目的功耗情况如何？有没有做过功耗优化？如果有，主要从哪些方面入手？

- 低功耗的话，对于中控我们定位是系统处理的大脑，更需要的是高性能而不是低功耗，稳定性的话，我了解到H5的耐温- 40℃~85℃，，，，（在鸿创时做温循时，，，）
- 再说说F030，它的主频250Mhz，性能也还可以，成本也低，所以我就选了它❓

## 你刚刚说，你用到的RTOS，我想问一下：（可能是RTOS相关的知识点）

- 你将系统功能划分为了哪些具体任务？每个任务的优先级是如何设定的？这样设定的依据是什么？
- 有没有遇到过优先级反转的问题？如果有，是如何解决的？
- 内存管理了解吗？
- 任务调度是怎么样的？你选的是哪个？
- 你知道xxx的调度原理吗？
- 你用RTOS具体是怎么用的？（这个可能要回答具体实现，时间片大小？
- 你任务栈的大小是根据什么设置的？你实际设置了多大？
- 你有没有相关为什么有的RTOS函数后面是fromisr结尾？（这个应该要结合中断处理来回答）

## 你对于加班是怎么看的？如果你回家的路上，突然项目需要你回来？你有什么想法？

- 认同加班，是责任心和专业态度的体现，我之前也，，，我们当时，，，最终，，，
- 不过，我也认为长期，，，会影响，，，所以在日常工作我会更加注重，，，和，，，

## 项目实习的背景

- 记得提一下，也是和我们星宸一样的xxx企业

## ARM用过吗？（这个问的话，估计是要往汇编那里靠了）

- 汇编指令

## int main函数里面的 args和argv是什么意思，了解吗？

- 相信今天学习了字符串数组和二级指针之后，你的认识会不一样，直接看代码

```c
int main(int argc, char *argv[]);
int main(int argc, char **argv);
```

## C语言如何实现C++的面向对象或者多态？

- C语言作为面向过程的语言，是没有原生的面向对象的特性，但我们可以通过编程去实现C++这样一个OOP的思想
- OOP的一个核心思想就是：封装、继承、多态
- 具体的实现方法：
- 模拟封装
  - 定义结构体
- 模拟继承
  - 结构体嵌套
- 模拟多态
  - 函数指针表

## 你用过二级指针吗？举例看看

- 来看看豆书记是怎么说的<https://www.doubao.com/thread/w1893fd043ad6d7a2>
