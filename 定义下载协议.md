# 下载协议

1，要实现下载流程，就行确定上位机和下位机之间的通信协议，根据Bootloader来设计该传输协议

- 下位机发送请求给上位机，请求获取升级信息

- 上位机发送固件信息给下位机，上位机发送的固件信息里含有：
  - 数据流大小、长度
  - App加载地址
  - 校验码
  - 其他：配置信息Cfg，文件名......
- 下位机在收到数据后，需要进行校验，校验通过后，将数据写入到指定地址
- 上位机先发同步字符，再发一个“结构体”

- 下位机根据上位机发送的结构体，来决定是否升级
  - 由Bootloader决定
  - 若决定升级，则发送“确认”字符
  - 上位机将文件发给Bootloader
  - Bootloader计算CRC，和之前收到的固件信息比对

- Bootloader烧写

2，抗干扰性
🙂
