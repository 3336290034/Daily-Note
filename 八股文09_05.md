# 依旧八股文 --- 加油吧，干就完了

## strlen和sizeof关键字的区别？一个小题：char *ptr = “12345”;strlen(ptr)和sizeof(ptr)分别是多少？

- 看看豆书记怎么说的：<https://www.doubao.com/thread/w4717ecc4117ec982>
- `sizeof`：既是运算符，也是关键字；作用是返回变量或者数据类型所占的字节数，在编译阶段完成
- `strlen`：是C标准库<string.h>中的一个函数；用于计算以‘\0’结尾的字符串的实际长度，在运行时完成
- 示例

```c
char arr[] = "12345";
char *ptr = "12345";

sizeof(arr);    // 结果是 6，包含末尾的 '\0'
strlen(arr);    // 结果是 5，不包含 '\0'
sizeof(ptr);    // 结果是 4 或 8（取决于平台），因为 ptr 是指针
strlen(ptr);    // 结果是 5，计算字符串长度

你就记住，strlen 它前面有个str啊，就表示它是针对字符串的嘛，算字符串的长度
```

## char arr[] = "123";和char arr[] = {1, 2, 3};两个有啥区别吗？

- 看看豆书记怎么说的：<https://www.doubao.com/thread/wf187460879f6e0f9>
- 一个是标准C字符串，一个是普通字符数组

## char arr[] = "123";和char *ptr = "123";两个有啥区别吗？

## 为什么 int *ptr = "12345"是警告，而int *ptr = 12345是错误？

## C语言程序内存的分配

- 看看豆书记怎么说的：<https://www.doubao.com/thread/wf909f33948c09c72>
- 主要有5个区：代码段、数据段、BSS段、堆区、栈区、内核空间（从左到右低地址到高地址）
- .text
- .data
- .bss （程序内存布局中专门存放未初始化、或初始化为0的全局变量、静态变量的区域）
- heap
- stack
- 常考的有：
  - 局部变量存放在哪？（栈区，[没有被static修饰]）
  - 全局变量存放在哪？（数据段[如果初始化]或BSS段）
  - 静态变量存放在哪？（数据段[如果初始化]或BSS段）

## 给全局变量和局部变量分别变为静态时，两者的生存周期，作用域，链接属性有什么变化?

- 首先，static关键字的作用是控制变量或者函数的生命周期、作用域和链接属性
- 局部变量被修饰：该变量的生命周期将延长至整个程序运行期间，而不仅仅是函数调用期间，同时，该变量只会被初始化一次，即使函数多次调用，其值也会被保留
- 全局变量被修饰：该变量的作用域将被限制在定义它的文件内，其他文件无法访问该变量，从而`避免命名冲突`
- 函数被，，，：static关键字对链接属性的主要影响是将外部链接(external linkage)转变为内部链接(internal linkage)，从而限制变量或函数的可见范围，避免命名冲突

## Linux常见的命令有哪些？

## 进程（P）和线程（T）的区别？

- 基本定义
  - P：是系统进行资源分配和调度的基本单位，是程序的一次执行过程
  - T：CPU调度的基本单位，是进程中的一个执行单元，是执行流
- 资源占用
  - P：拥有独立的地址空间、代码段、数据段和堆栈等资源
  - T：共享所属进程的资源，只拥有独立的栈空间和程序计数器PC[拥有独立的“执行状态”:栈、寄存器、PC、TLS等]
- 创建和销毁 开销
  - P：需要通过系统调用，开销较大
  - T：这个相对就小，只需要分配栈空间和少量数据结构
- 切换开销
  - P：大，需要保存/恢复整个地址空间
  - T：小，只需........寄存器和栈
- 通信方式
  - P：进程间通信(IPC)较复杂，需要管道、消息队列、共享内存等机制
  - T：线程间通信简单，可直接通过共享内存进行
- 使用场景
  - P：需要高稳定性、资源隔离的场景（如浏览器不同标签页）
  - T：需要高并发、共享数据的场景（如Web服务器处理多个请求）
- 编程复杂度
  - P：编程相对简单，但IPC复杂
  - T：编程复杂，需要考虑同步、死锁等问题
- 常见误区：
  - P：数量一般较少，受系统资源限制
  - T：理论上很多，但是也受系统资源限制
  - MMU不是多进程的必要条件，但它大大增强了多进程系统的安全性、稳定性和功能，`MMU主要提供的是内存保护和虚拟内存功能`
  - 多任务编程 = 多线程吗？不完全等同！
  - FreeRTOS 是多线程操作系统，而非多进程。RTOS 的 “任务” ≈ 通用系统中 “没有进程隔离的线程”。<https://www.doubao.com/thread/w70a72135598705a1>

## 什么样的设备支持多进程呢？

```c
| 设备类型 | 是否支持 | 例子 | 特点 |
|----------|----------|------|------|
| 现代CPU+操作系统 | ✅完全支持 | PC、手机、服务器 | 有MMU，真正的多进程 |
| 嵌入式MCU | ✅有限支持 | STM32、ESP32 | 无MMU，协作式多任务 |
| 单片机 | ✅基本支持 | 51单片机 | 极简单任务切换 |
| 计算器 | ❌不支持 | 普通计算器 | 只能单任务 |

关键要求就是：有任务调度器，有上下文保存恢复机制
```

## 结构体和联合体的区别？

- 最大的区别就是内存的分配方式
  - 结构体：每个成员都有自己的内存空间，结构体的大小是所有成员大小之和（考虑内存对齐）
  - 联合体：所有成员共享同一块内存空间，联合体的大小是其最大成员的大小（考虑内存对齐）
- 成员的访问方式
  - 结构体：可以同时访问所有成员，互不影响
  - 联合体：所有成员共用同一块内存的起始地址，一次只能访问一个成员，修改一个成员会影响其他成员的值
